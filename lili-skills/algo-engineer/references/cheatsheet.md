# 算法工程师速查手册

## 复杂度速查

### 时间复杂度
| 复杂度 | 名称 | 典型场景 | n=10⁶时的操作数 |
|--------|------|----------|-----------------|
| O(1) | 常数 | 哈希表查找 | 1 |
| O(log n) | 对数 | 二分查找 | ~20 |
| O(√n) | 平方根 | 分解质因数 | 1000 |
| O(n) | 线性 | 单次遍历 | 10⁶ |
| O(n log n) | 线性对数 | 快排、归并 | ~20×10⁶ |
| O(n²) | 平方 | 双重循环 | 10¹² |
| O(2ⁿ) | 指数 | 子集枚举 | 无法完成 |

### 空间复杂度
- **O(1)**: 原地操作，仅使用固定额外空间
- **O(log n)**: 递归栈深度
- **O(n)**: 线性存储（辅助数组、哈希表）
- **O(n²)**: 二维矩阵、图邻接矩阵

## 数据结构选择决策树

```
需要有序?
├── 是 → 需要随机访问?
│       ├── 是 → 数组/动态数组
│       └── 否 → 链表/跳表/树
└── 否 → 需要快速查找?
        ├── 是 → 哈希表
        └── 否 → 数组/链表

需要优先级?
└── 堆（优先队列）

需要并查集?
└── 不相交集合（Union-Find）

需要前缀匹配?
└── Trie树/前缀树
```

## 算法模式索引

### 数组/字符串
- **Two Pointers**: 有序数组、回文、容器盛水
- **Sliding Window**: 子数组和、最长无重复子串
- **Prefix Sum**: 区间查询、子数组和
- **Difference Array**: 区间更新、差分数组

### 链表
- **Fast/Slow Pointer**: 环检测、中点查找
- **Reversal**: 链表翻转（迭代/递归）
- **Merge**: 合并有序链表

### 树
- **DFS**: 前序/中序/后序遍历
- **BFS**: 层序遍历、最短路径
- **BST**: 查找、插入、删除
- **Trie**: 前缀匹配、自动补全

### 图
- **BFS**: 无权图最短路径、连通分量
- **DFS**: 拓扑排序、环检测
- **Dijkstra**: 单源最短路径（非负权）
- **Bellman-Ford**: 单源最短路径（可负权）
- **Floyd-Warshall**: 全源最短路径
- **Kruskal/Prim**: 最小生成树
- **Tarjan**: 强连通分量

### 动态规划
- **0/1背包**: 每个物品选或不选
- **完全背包**: 物品无限
- **线性DP**: 最长递增子序列、编辑距离
- **区间DP**: 矩阵链乘、石子合并
- **状态压缩DP**: 子集、旅行商
- **树形DP**: 树上最大独立集

## 系统设计速查

### 扩展性公式
- **水平扩展**: 加机器（scale out）
- **垂直扩展**: 加配置（scale up）
- **AKF扩展立方**: X轴（复制）、Y轴（功能拆分）、Z轴（数据分片）

### 缓存策略
- **Cache Aside**: 应用管理缓存，最常用
- **Read Through**: 缓存服务加载数据
- **Write Through**: 同步写缓存和数据库
- **Write Behind**: 异步写数据库（高吞吐）
- **TTL**: 过期时间
- **LRU/LFU**: 淘汰策略

### 数据库选择
| 场景 | 推荐 | 原因 |
|------|------|------|
| 事务/关系 | PostgreSQL | 功能全、可靠 |
| 文档 | MongoDB | 灵活 schema |
| 键值 | Redis | 极速、内存 |
| 搜索 | Elasticsearch | 全文索引 |
| 时序 | InfluxDB/TimescaleDB | 时间优化 |
| 图 | Neo4j | 关系查询 |

### 消息队列对比
| 特性 | RabbitMQ | Kafka | Redis Pub/Sub |
|------|----------|-------|---------------|
| 消息持久化 | 是 | 是 | 否 |
| 消费确认 | 是 | offset | 无 |
| 顺序保证 | 队列内 | 分区内 | 无 |
| 吞吐量 | 中 | 极高 | 高 |
| 适用 | 企业集成 | 日志/流处理 | 实时通知 |

## 代码审查红线

### 绝对不能出现
- [ ] 硬编码密码/密钥
- [ ] SQL 拼接（SQL注入）
- [ ] 不验证的用户输入
- [ ] 敏感信息日志输出
- [ ] 无超时设置的网络请求
- [ ] 无限递归无终止条件

### 应该避免
- [ ] 魔法数字（无注释的常量）
- [ ] 重复代码（DRY原则）
- [ ] 过长的函数（>50行）
- [ ] 深层嵌套（>3层）
- [ ] 无错误处理

## 性能调优清单

### 定位瓶颈
1. **测量**: 不要猜测，先 profile
2. **CPU bound?**: 看算法复杂度、循环优化
3. **I/O bound?**: 看网络/磁盘调用次数
4. **Memory bound?**: 看对象创建、GC压力

### 常见优化
- **批处理**: 减少 I/O 次数
- **异步**: 不阻塞主流程
- **连接池**: 复用昂贵资源
- **预计算**: 空间换时间
- **懒加载**: 按需加载
- **压缩**: 减少传输体积
